{% extends 'base.html' %}

{% block title %}
  Create Video
{% endblock %}

{% block body %}
  <h3>Create a new video:</h3>
  <div>
    <form method="post">

      <div class="my-3">

        {{ form.hidden_tag() }}
        {{ form.name.label(class="form-label") }}
        {{ form.name(size=20, class="form-control") }}

        {% if form.errors %}
          {% for field_name, errors in form.errors.items() %}
            <div class="my-3 alert alert-danger">
              <strong>{{ field_name }}</strong>
              <ul>
                {% for error in errors %}
                  <li>{{ error }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endfor %}
        {% endif %}

      </div>

      <div class="my-3">

        {{ form.hidden_tag() }}
        {{ form.link.label(class="form-label") }}
        {{ form.link(size=20, class="form-control") }}

        {% if form.errors %}
          {% for field_name, errors in form.errors.items() %}
            <div class="my-3 alert alert-danger">
              <strong>{{ field_name }}</strong>
              <ul>
                {% for error in errors %}
                  <li>{{ error }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endfor %}
        {% endif %}
      </div>
      <input class="btn btn-primary" type="submit" value="Add">
      <p>or</p>
      <div>
        <input type="file" id="file-uploader">
        <p>Upload a file and see the output in browser console</p>
        <p id="feedback"></p>
      </div>
    </form>
  </div>
  <script>
    const fileUploader = document.getElementById('file-uploader');

    fileUploader.addEventListener('change', (event) => {
      const files = event.target.files;
      console.log('files', files);
      
      const feedback = document.getElementById('feedback');
      const msg = `File ${files[0].name} uploaded successfully!`;
      feedback.innerHTML = msg;
    });
  </script>
  <div class="mt-2">
    <a href="{{ url_for('videos_app.list') }}">
      Back to video list
    </a>
  </div>
{% endblock %}
